<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --ink: #111111;
        --paper: #f8f8f3;
        --acid: #ffea00;
        --signal: #ff2d55;
        --steel: #e3e3e3;
      }

      * {
        box-sizing: border-box;
        font-family: "Space Grotesk", "Helvetica Neue", Arial, sans-serif;
      }

      .calculator {
        width: 340px;
        border: 4px solid var(--ink);
        background-color: var(--paper);
        padding: 18px;
        margin: 20px auto;
        box-shadow: 12px 12px 0 var(--ink);
      }

      .display {
        background-color: var(--ink);
        color: var(--acid);
        padding: 14px 16px;
        font-size: 26px;
        text-align: right;
        min-height: 90px;
        margin-bottom: 18px;
        border: 3px solid var(--ink);
        box-shadow: 6px 6px 0 var(--ink);
      }

      .display #expression {
        color: var(--steel);
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      .buttons {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
      }

      .button {
        width: 100%;
        padding: 18px 8px;
        font-size: 18px;
        border: 3px solid var(--ink);
        background-color: var(--steel);
        color: var(--ink);
        cursor: pointer;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        box-shadow: 4px 4px 0 var(--ink);
        transition:
          transform 0.05s ease-in,
          box-shadow 0.05s ease-in;
      }

      .button:hover {
        background-color: var(--paper);
      }

      .button:active {
        transform: translate(3px, 3px);
        box-shadow: 1px 1px 0 var(--ink);
      }

      .button.special {
        background-color: var(--acid);
      }

      .button.special.equals {
        background-color: var(--signal);
        color: #ffffff;
      }
    </style>
  </head>
  <body
    class="flex items-center justify-center min-h-screen bg-cover bg-center"
    style="
      background-image: url(https://static.vecteezy.com/system/resources/previews/032/458/423/non_2x/halftone-abstract-brutalism-background-brutal-contemporary-neon-black-brutalist-neo-modernism-trendy-postmodern-retro-style-vector.jpg);
    "
  >
    <div class="calculator">
      <div id="display" class="display flex flex-col justify-center">
        <div id="expression" class="text-sm text-gray-300">0</div>
        <div id="result">0</div>
      </div>

      <div class="buttons">
        <button class="button special" onclick="clearEntry()">CE</button>
        <button class="button special" onclick="clearAll()">C</button>
        <button class="button special" onclick="backspace()">⌫</button>
        <button class="button special" onclick="appendOperator('/')">÷</button>

        <button class="button" onclick="appendNumber('7')">7</button>
        <button class="button" onclick="appendNumber('8')">8</button>
        <button class="button" onclick="appendNumber('9')">9</button>
        <button class="button special" onclick="appendOperator('*')">×</button>

        <button class="button" onclick="appendNumber('4')">4</button>
        <button class="button" onclick="appendNumber('5')">5</button>
        <button class="button" onclick="appendNumber('6')">6</button>
        <button class="button special" onclick="appendOperator('-')">−</button>

        <button class="button" onclick="appendNumber('1')">1</button>
        <button class="button" onclick="appendNumber('2')">2</button>
        <button class="button" onclick="appendNumber('3')">3</button>
        <button class="button special" onclick="appendOperator('+')">+</button>

        <button class="button" onclick="toggleSign()">±</button>
        <button class="button" onclick="appendNumber('0')">0</button>
        <button class="button" onclick="appendNumber('.')">.</button>
        <button class="button special equals" onclick="calculate()">=</button>
      </div>
    </div>

    <script>
      let expression = "";
      let resultDisplayed = false;

      function appendNumber(number) {
        if (resultDisplayed) {
          expression = number;
          resultDisplayed = false;
        } else {
          expression += number;
        }
        updateDisplay();
      }

      function appendOperator(operator) {
        if (resultDisplayed) resultDisplayed = false;
        if (expression === "" || isOperator(expression.slice(-1))) return;
        expression += operator;
        updateDisplay();
      }

      function isOperator(char) {
        return ["+", "-", "*", "/"].includes(char);
      }

      function updateDisplay() {
        document.getElementById("expression").textContent = expression || "0";
      }

      function clearAll() {
        expression = "";
        document.getElementById("result").textContent = "0";
        updateDisplay();
      }

      function clearEntry() {
        expression = expression.slice(0, -1);
        updateDisplay();
      }

      function backspace() {
        expression = expression.slice(0, -1);
        updateDisplay();
      }

      function toggleSign() {
        if (expression && !isNaN(expression)) {
          expression = (parseFloat(expression) * -1).toString();
          updateDisplay();
        }
      }

      function calculate() {
        try {
          const result = eval(expression);
          document.getElementById("result").textContent = result;
          expression = result.toString();
          resultDisplayed = true;
        } catch (e) {
          document.getElementById("result").textContent = "Error";
        }
      }
    </script>
  </body>
</html>
